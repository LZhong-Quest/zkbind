<window apply="org.zkoss.zktest.zbind.basic.CollectionIndexGridComposer">
	<custom-attributes composerName="vm"/>
	<label value="@bind(vm.message1)"/>
	<grid id="grid" width="700px" model="@bind(vm.items)">
		<columns>
			<column label="index"/>
			<column label="name"/>
			<column label="options" width="200px"/>
			<column label="action" width="300px"/>
		</columns>
		
		<template name="model" var="item" status="s">
			<row>
				<label value="@bind(s.index)"/>
				<label value="@bind(item.name)"/>
				<grid hflex="1" model="@bind(item.options)">
					<columns>
						<column label="index"/>
						<column label="previous-index"/>
						<column label="name"/>
					</columns>
					<template name="model" var="option" status="ss">
						<row>
							<label value="@bind(ss.index)"/>
							<label value="@bind(s.index)"/>
							<label value="@bind(option)"/>
						</row>
					</template>
				</grid>				
				<hbox>
					<button label="Index" onClick="@bind('showIndex', index=s.index)"/>
					<button label="Delete" onClick="@bind('delete', item=item)"/>
					<button label="Add After" onClick="@bind('addAfter', item=item)"/>
					<button label="Add Before" onClick="@bind('addBefore', item=item)"/>
				</hbox>
			</row>
		</template>
	</grid>

	<hbox>
		<button label="reload" onClick="@bind('reload')" />
		<button label="detach" onClick="grid.detach()" />
		<button label="Dump" onClick="binder.getTracker().dump()" />
	</hbox>	
</window>